
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="assets/imgs/han_sooyoung.jpg" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/1.1.3/sweetalert.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5428833357773569"
     crossorigin="anonymous"></script>
    <title>VINOLAND</title>
    <link rel="stylesheet" href="xxx.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
          integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
          crossorigin="anonymous" />
    <style>
        .log-container {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #3b3d4e93;
            border-radius: 5px;
            max-height: 200px;
            overflow-y: auto;
            width: 100%;
            max-width: 600px;
            min-height: 300px;
            box-sizing: border-box;
            margin: 20px auto;
            text-align: left;
        }
        .log-entry {
            margin: 5px 0;
            font-size: 12px;
            color: #ffffff;
        }
        .custom-input, .custom-button {
            background-color: #333333;
            color: #ffffff;
            border: 1px solid #555555;
        }
        .custom-button {
            cursor: pointer;
        }
        .custom-button:hover {
            background-color: #444444;
        }
        .custom-button:disabled {
            background-color: #555555;
            color: #aaaaaa;
            cursor: not-allowed;
            opacity: 0.5;
        }
        .nav_links a {
            color: #ffffff;
        }
        .nav_links a:hover {
            color: #b3b3b3;
        }
        .header_logo img {
            mix-blend-mode: lighten;
        }
        .sweet-alert {
            background-color: #2c2c2c;
            color: #ffffff;
        }
        .sweet-alert h2, .sweet-alert p {
            color: #ffffff;
        }
        .sweet-alert .sa-button-container .confirm {
            background-color: #333333 !important;
            color: #ffffff !important;
            border: none;
            box-shadow: none;
        }
        .sweet-alert .sa-button-container .confirm:hover {
            background-color: #444444 !important;
        }
        .sweet-alert .sa-button-container .cancel {
            background-color: #555555 !important;
            color: #ffffff !important;
            border: none;
            box-shadow: none;
        }
        .sweet-alert .sa-button-container .cancel:hover {
            background-color: #666666 !important;
        }
        ::-webkit-scrollbar {
            width: 12px;
        }
        ::-webkit-scrollbar-track {
            background: #2c2c2c;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #5a5a5a;
            border-radius: 6px;
            border: 3px solid #2c2c2c;
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: #777;
        }
        html {
            scrollbar-width: thin;
            scrollbar-color: #5a5a5a #2c2c2c;
        }
         @keyframes typewriter {
            from {
                width: 0;
            }
            to {
                width: 31.5em;
            }
        }
    </style>
<style>
    .sweet-alert {
        max-width: 478px;
        width: 80%;
    }

    @media (max-width: 400px) {
        .sweet-alert {
            max-width: 90%;
            width: 90%;
            font-size: 12px;
            padding: 10px;
        }

        .sweet-alert .sa-icon {
            width: 40px;
            height: 40px;
        }

        .sweet-alert h2 {
            font-size: 14px;
        }

        .sweet-alert p {
            font-size: 12px;
        }

        .sweet-alert .sa-button-container .confirm {
            font-size: 12px;
        }
    }
</style>

</head>
<body>
<header>
    <nav>
        <div class="header_logo">
            <img src="https://imgcdn.stablediffusionweb.com/2024/9/11/cff2538b-c96a-4679-8964-5bccfd25d978.jpg" alt="" />
        </div>
        <div class="header_links">
            <ul class="nav_links">
            </ul>
        </div>
    </nav>
</header>
<section class="main">
    <span>chya-b &(❁´◡`❁)</span>
    <p>bug inquiries? question? jangan lupa baca informasi dibawah.</p>
    <div style="margin-top: 20px; display: flex">
        <input type="text" placeholder="Enter your APP ID / URL here." class="custom-input"
               style="padding: 10px; border: 1px solid transparent; border-radius: 5px; font-size: 16px; width: 65%; box-sizing: border-box; margin-right: 10px;" />
        <button id="submit-button" class="custom-button"
                style="padding: 10px 20px; border: none; color: white; border-radius: 5px; width: 30%;"
                onclick="handleInput()">Submit</button>
    </div>
    <div id="log-container" class="log-container"></div>
    <div style="margin-top: 20px; text-align: center; color: #ffffff;">
    </div>
    
</section>
<script>
function showSwal2(event, link) {
    event.preventDefault();

    swal({
        title: 'Informasi',
        html: true,
        text: '<strong style="color: red;">WARNING!</strong><br><br>' +
              '<span style="color: white;">Asking to add an APP ID that is not available, Asking for a tutorials will lead your Telegram messages being ignored.</span><br><br>' +
              '<span style="color: white;">However, these discord accounts are only for <a href="https://discord.gg/XBjQ6egyaE" style="color: #ADD8E6;" target="_blank">VTeam</a> related questions not for the web version.</span><br>' +
              '<strong style="color: red;">Are you sure you want to continue?</strong>',
        icon: 'warning',
        buttons: {
            cancel: {
                text: "Cancel",
                value: null,
                visible: true,
                className: "cancel-button",
                closeModal: true,
            },
            confirm: {
                text: "Okay",
                value: true,
                visible: true,
                className: "confirm-button",
                closeModal: true,
            }
        },
        closeOnClickOutside: false,
        closeOnEsc: false
    }, function (isConfirmed) {
        if (isConfirmed) {
            window.location.href = link;
        }
    });

    setTimeout(() => {
        const confirmButton = document.querySelector('.sa-confirm-button-container .confirm');

        if (confirmButton) {
            confirmButton.disabled = true;

            let countdown = 7;
            const interval = setInterval(() => {
                countdown--;
                if (countdown <= 0) {
                    clearInterval(interval);
                    confirmButton.disabled = false;
                }
            }, 1000);
        } else {
            console.error("Confirm button not found!");
        }
    }, 100);
}
</script>


<script>
document.addEventListener("DOMContentLoaded", function () {
    const cooldownTime = 20;
    let processing = false;

    window.setCookie = function (name, value, seconds) {
        const d = new Date();
        d.setTime(d.getTime() + (seconds * 1000));
        const expires = "expires=" + d.toUTCString();
        document.cookie = name + "=" + value + ";" + expires + ";path=/";
    };

    window.getCookie = function (name) {
        const cname = name + "=";
        const decodedCookie = decodeURIComponent(document.cookie);
        const ca = decodedCookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(cname) === 0) {
                return c.substring(cname.length, c.length);
            }
        }
        return "";
    };

    const submitButton = document.getElementById("submit-button");
    const logContainer = document.getElementById("log-container");

    const swalCooldown = 1;

    function showSwal() {
        swal({
            title: 'chya-b -steam',
            html: true,
            text: '<strong style="color: red;">WARNING!</strong><br><br>' +
                '<span style="color: white;">If you see someone claiming as me anywhere on other social media, ' +
                '<strong style="color: red;">THAT\'S NOT ME!</strong> They are likely trying to <strong style="color: red;">SCAM</strong> you.</span><br>' +
                '<span style="color: white;">For your safety,</span> ' +
                '<strong style="color: red;">do not deal with these people.</strong><br><br>' +
                '<span style="color: white;">I only use discord:</span> ' +
                '<a href="https://discord.gg/XBjQ6egyaE" target="_blank" style="color: lightblue; text-decoration: underline;" onclick="showSwal2(event, \'https://discord.gg/XBjQ6egyaE\')">@chya-b</a>' +
                ' ' +
                '<a href="https://t.me/chyatv" target="_blank" style="color: lightblue; text-decoration: underline;" onclick="showSwal2(event, \'https://t.me/chyatv\')">@chyatv-</a>' +
                '<br><span style="color: white;">I do not have any social media other than Telegram!</span><br><br>' +
                '<strong style="color: white;">Note:</strong><br>' +
                '<span style="color: white;">This site will not provide any advice or tutorials. By using it, I assume you know what to do and accept full responsibility for your actions.</span>',
            button: {
                text: "OK",
                visible: true,
                className: "confirm-button",
                closeModal: true,
            }
        });

        const confirmButton = document.querySelector('.sweet-alert .confirm');
        confirmButton.disabled = true;
        confirmButton.style.cursor = 'not-allowed';
        confirmButton.style.opacity = '0.5';

        let remainingTime = swalCooldown;
        const interval = setInterval(() => {
            remainingTime--;

            if (remainingTime <= 0) {
                clearInterval(interval);
                confirmButton.disabled = false;
                confirmButton.style.cursor = 'pointer';
                confirmButton.style.opacity = '1';
            }
        }, 1000);
    }

    function startCooldown() {
        const now = Math.floor(Date.now() / 1000);
        const cooldownEnd = now + cooldownTime;
        setCookie("cooldownEnd", cooldownEnd, cooldownTime);

        updateButtonState(cooldownEnd);
    }

    function updateButtonState(cooldownEnd) {
        const now = Math.floor(Date.now() / 1000);
        const remainingTime = cooldownEnd - now;

        if (remainingTime > 0) {
            submitButton.disabled = true;
            submitButton.textContent = `Wait ${remainingTime}s`;

            const interval = setInterval(() => {
                const now = Math.floor(Date.now() / 1000);
                const timeLeft = cooldownEnd - now;

                if (timeLeft > 0) {
                    submitButton.textContent = `Wait ${timeLeft}s`;
                } else {
                    clearInterval(interval);
                    submitButton.disabled = false;
                    submitButton.textContent = "Submit";
                    document.cookie = "cooldownEnd=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                }
            }, 1000);
        } else {
            submitButton.disabled = false;
            submitButton.textContent = "Submit";
        }
    }

    function handleCooldown() {
        const cooldownEnd = getCookie("cooldownEnd");
        if (cooldownEnd) {
            updateButtonState(parseInt(cooldownEnd, 10));
        }
    }

    function saveLogToLocalStorage() {
        const logEntries = [];
        const logItems = logContainer.querySelectorAll(".log-entry");
        logItems.forEach(entry => {
            logEntries.push(entry.textContent);
        });
        localStorage.setItem("logHistory", JSON.stringify(logEntries));
    }

    function loadLogFromLocalStorage() {
        const savedLogs = localStorage.getItem("logHistory");
        if (savedLogs) {
            const logEntries = JSON.parse(savedLogs);
            logEntries.forEach(entryText => {
                const logEntry = document.createElement("div");
                logEntry.className = "log-entry";
                logEntry.textContent = entryText;
                logContainer.appendChild(logEntry);
            });
        }
    }

    async function handleInput() {
        if (processing) return; // Prevent double requests
        processing = true;

        const input = document.querySelector(".custom-input").value.trim();

        function extractAppId(input) {
            if (/^\d+$/.test(input)) {
                return input;
            }
            const urlPattern = /(?:app\/|agecheck\/app\/)(\d+)/;
            const match = input.match(urlPattern);
            return match ? match[1] : null;
        }

        function getCurrentTimestamp() {
            const now = new Date();
            return now.toLocaleString();
        }

        const appId = extractAppId(input);

        if (!appId) {
            const errorEntry = document.createElement("div");
            errorEntry.className = "log-entry";
            errorEntry.textContent = `${getCurrentTimestamp()} [ Error ] Invalid URL or APP ID.`;
            logContainer.appendChild(errorEntry);
            saveLogToLocalStorage();
            scrollLogToBottom();
            processing = false;
            return;
        }

        const logEntry = document.createElement("div");
        logEntry.className = "log-entry";
        logEntry.textContent = `${getCurrentTimestamp()} [ Information ] Finding APP ID: ${appId}`;
        logContainer.appendChild(logEntry);
        saveLogToLocalStorage();
        scrollLogToBottom();

        try {
            const response = await fetch(`https://www.vinoland.net/get-appid?appId=${appId}`);
            const result = await response.text();
            const resultEntry = document.createElement("div");
            resultEntry.className = "log-entry";
            resultEntry.textContent = `${getCurrentTimestamp()} [ Result ] ${result}`;
            logContainer.appendChild(resultEntry);
            saveLogToLocalStorage();
            scrollLogToBottom();

            if (result.startsWith("Successfully generated APP ID: ")) {
                const branchName = result.replace("Successfully generated APP ID: ", "").trim();
                const downloadResponse = await fetch(`https://www.vinoland.net/download?appId=${branchName}`);
                const downloadData = await downloadResponse.json();
                const downloadUrl = downloadData.url;
                const a = document.createElement("a");
                a.href = downloadUrl;
                a.download = `${branchName}.zip`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }
        } catch (error) {
            const errorEntry = document.createElement("div");
            errorEntry.className = "log-entry";
            errorEntry.textContent = `${getCurrentTimestamp()} [ Error ] Unable to download the Zip Files due to too many users generating at the same time. Try again.`;
            logContainer.appendChild(errorEntry);
            saveLogToLocalStorage();
            scrollLogToBottom();
        } finally {
            processing = false;
        }
    }

    function scrollLogToBottom() {
        logContainer.scrollTop = logContainer.scrollHeight;
    }

    submitButton.addEventListener("click", () => {
        handleInput();
        startCooldown();
    });

    //loadLogFromLocalStorage();
    handleCooldown();
    showSwal();
});
</script>

</body>
</html>
